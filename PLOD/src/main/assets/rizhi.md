# 公告
- 可在APP内部访问在线应用社区。
- 建议用电脑收藏[DoDo群网址](https://www.imdodo.com/channel/157568/889287) 。我会不定时地查看，分享新的特性。

# v7.0
- 开启笔记功能。
- 新增相机取词功能，需安装插件图文之心.apk。

# v6.X 更新总结
- 新增页面繁简转换功能
- 新增点击选词模式和快捷翻译栏
- 优化点击翻译的构词库（假设构词库只改变单词后缀、查询所有构词库）、自动去单词后缀
- 调整沉浸式滚动、使得键盘伸缩界面、部分搜索框置底化。
- 可上下翻页部分多列列表
- 提升黑暗模式的兼容性，可自定义色调
- 新增弹出式长按菜单，包括页面连接、词条列表等界面
- 预览笔记系统

# v6.9.2
- 更快中断全文搜索
- 可设置在线词典在点击翻译中使用单独的webview
- 修复页面转换为简体不完全
- 开始适配无障碍屏幕朗读器（Talkback）

# v6.9.1
- 修复列表繁简转换崩溃
- 修复“新版多页面”资源不能加载、某些情况链接不能跳转等问题
- 修复“新版多页面”子页面过宽时，横向滚动与翻页冲突

# v6.9
- 修复PDF书签
- 不重新加载已缓存PDF
- 新增词条列表长按菜单，可以：开启繁简转换，进入翻阅模式/点击翻译/多维分享。

# v6.8.2
- 修复多页面设置错乱
- 修复Mdd不能发音
- 修复合并页面展开不完全
- 修复，使PDF阅读生效（支持安卓5以上）
- 对于ocr产生的pdf文件，段落点选可能会失效，所以新增[“A/B间选择”](https://www.imdodo.com/channel/157568/889299/382862420927971328?fromPage=1)功能:开启点选模式后，点选任意A/B两处，然后用工具按钮打开“文本工具”双列对话框，其中第一页的“全选”旁新增有“间选”菜单项。如果没有开启点选模式，则需点击“间选”两次(选一处点一次)。

# v6.8.1
- 兼容Collins2020.mdx，原先不能展示后半本词条内容
- 修复屏风页面模式下拖动条的异常
- 修复分字搜索，和点译使用一样的构词库、自动去后缀


# v6.8
- 新增页面繁简转换功能（只有单字映射，仅供参考）。打开方式：上下翻动“翻译当前页面”对话框（从右上角菜单按钮打开），出现“转成繁体”、“转成简体”选项。
- 优化分享界面，简化四态切换为二态切换：如果从底栏宫格打开分享，默认就是分享局域网址。如果从底部菜单打开，默认是分享单词文本（包括发送单词与搜索单词，二者合并了；如果页面上有文本选择，发送的是选择的文本。）
- 调整多维分享的自定义 “_chooser” 字段，默认打开内建的分享UI。调用系统原界面需追加标志s（如c/q/s，起因是反向竖屏时使用小米系统的意图选择器发生错乱，明明选的是via，打开的却是天猫。）

- 限制搜索词列表的高度。点击输入框右边的小三横按钮，切换整个输入框工具的显示和隐藏。
- 页内搜索框默认置于底部（可设置）。
- 调整主界面，现随键盘弹出而改变高度。
- 浮动搜索以对话框形式召唤搜索工具栏。
- 修复浮动搜索退出时闪烁的bug

- 增强黑暗模式的兼容性，可自定义背景颜色（长按侧栏开关）。

- 当词典有重复词条时，词条跳转entry://...、点击翻译会显示所有匹配的内容。
- 优化点击翻译构词库使用方式
- 当联合搜索遇到重复词条时，自动增加数量上限。

# v6.7
### 1.预览“笔记”功能
- 可创建下划线/高亮标注（可定制颜色），并且可用括号/气泡/注释的形式为标注添加文本附注（前两者可定制文本大小与颜色，可选气泡颜色，气泡笔记可选择是否将笔记直接写入气泡中。注释笔记类似于zhihu/wiki网站的脚注系统，但也可选择将上标放入气泡中，使之更加明显）。创建后可修改。
- “笔记列表”分全部笔记/当前词典笔记/当前页面笔记，可按照创建时间/词典名称/文本段落及其组合进行排序。
- 解释页面的文本选择菜单添加“高亮”与“笔记”两项。长按“高亮”添加下划线标注，长按“笔记”修改已选标注或笔记。长按笔记列表可进行复制、分享或删除。

### 2.预览PDF阅读功能
- 正式支持打开PDF文件，支持文本高亮标注。

### 3.优化“点击翻译”、新增“快捷翻译栏”
- 启用“浏览选项”-“文本工具”按钮后，在按钮旁边新增横向的在线翻译词典列表——“快捷翻译栏”，可快速翻译文本选择。预置添加四种在线翻译站点，合称“百彩必有译”，实现翻译自由。
- 点译自动去单词后缀（s/'s/es/ing/ed/er/est），猜测单词原型。
- “点击翻译”定位字符方框更加精确。可为中文开启“大内存取词”模式（默认开启，可取得词组而非单字，需要分析整段文本）。
- 点击“点击翻译”标题栏可预览附近的词条，双列列表，上下滑动可连续翻页。
- 由于谷歌翻译彻底退出、彩云小译持续失效，普通网络已经无法直接翻译页面内容。（暂时办法：分享到其他浏览器）

### 4.新增“点选文本”功能，可快速划词翻译
- 打开“翻译当前页面”对话框（右上角菜单按钮），可切换点选模式（包括“段落点选”与“单词点选”），无需长按即可选取文本。（点选后，在原处再次点击应可调出系统原文本菜单）
- “段落点选”默认开启了“自动缩小选取范围”的功能 —— 点选段落后，再次轻触同一段落的内部，可点选其中的单词，如需呼出“系统的文本选择菜单”，可长按一会儿松开，或点击段落选区的开头或末尾。（与双击缩放冲突，需等待其时间窗过去才能触发。）


### 5.优化“文本工具”双列对话框
- 双列列表可上下滑动翻页，不再需要点击切换按钮。
- 长按列表中最后的几个项目，可自定义分享目标的名称。
- 可自定义分享目标共八个。长按列表以定制各个字段，内置字段名设有_chooser/_flag/_share，长按“保存”按钮可恢复默认值，更改后测试以查看作用。其中“_chooser”字段与直接打开目标还是打开系统选择器相关(如值c创建选择器、值q总是查询而忽略系统默认值、值s使用系统界面，建议组合为c/q)，“_flag”字段与系统的意图标志有关（建议填写n，代表打开新的任务），“_share”字段设置以某种类型打开内置的分享列表，值可为none/send/search，分别代表不生效/发送文本/搜索文本，不可组合。

### 6.其他界面优化
- 使沉浸式滚动可伸缩页面长度，底栏不遮挡页面底部。
- 新增“页边距”功能，可设置解释页面的左右边距。（“多页面设置”与“词典设置”，默认3%）
- 优化链接长按弹窗。
- (长按图片/词典标题栏/页面链接/词条列表)显示新的弹出式菜单。
- 长按删除索引。

### 7. Bug Fixes
- 解决JS传递书籍id参数精度不足导致词条跳转失败……等问题。
- 解决某些弹出界面在切换横竖屏后，意外留下不透明popup窗口，导致触控失效。
- 修复安卓4.4无法建立索引（lucene库文件编译版本/设备内存双重原因）。

# v6.4
- 修复不加载mdd资源
- 修复合并模式不能加载中文名称的css文件
- 修复工具对话框，可以打开设置搜索
- 修复进入翻阅模式崩溃
- 修复单个词典的标题和页面背景色设置

# v6.3
- 修复跳转失败
- 初步实现设置搜索，点击词典设置的时候可能会崩

# v6.2
- 列表底部不显示词典标题
- 添加繁简转换的图标
- 默认启动不恢复搜索词
- 美化设置界面
- 修复资源加载（不加载图片格式的外部文件资源）
- 修复局域服务失效

# v6.1
- 谷歌翻译生效，可以翻译词典内容，长按对照。
- 修复建立索引失败的问题，lucene全文搜索正式生效。(代价是安装包增大了几MB，以后想方法优化吧。)
- 修复多页面仅展开前几项失效的问题。
- 修复大小写敏感的mdx词典无法查询大写单词的问题。（链接跳转失败）

# v6.0
- 测试基于Lucene关键词索引的全文搜索功能（“搜索工具”-“搜索引擎”）。
- 很遗憾，由于彩云小译的网页翻译接口已失效，没来得及与大家见面。

# v5.X 更新小结
- 新功能：
> 1. 联合搜索的多个结果支持合并或分散显示。
> 2. 引入两种全文翻译。
> 3. 实现悬浮按钮、小窗模式。
> 4. 快速显示选择文本的工具按钮。
> 5. 可切换繁简汉字。
> 6. 可分享到其他APP中查看单词或释义。
> 7. 组建应用社区。

- TODO:
> 1. 已隐藏编辑功能。更合适的方式应该是在原页面叠加标记，而非直接编辑。

# v5.9
- 新功能 ：在“底部工具栏”->“宫格菜单”中实现了分享按钮。可分享**单词**或**网址**，点击分享列表的第一个格子以进行设置。
- 单词分享方式有：纯文本分享单词 / 在线搜索单词。
- 网址分享方式分为：在线词典是用外部浏览器打开相应的网址。非在线词典则是通过局域网服务打开网页版。

# v5.8
- 新增主界面小窗模式（“宫格菜单”->“浏览选项”），类似于某些系统支持的多窗口。启用后无需切换就能查词，直接用主程序替代悬浮查词。
- 小窗模式最小化后会显示悬浮按钮，与剪贴板的悬浮按钮是同一个。

# v5.7.5
- 由于同时显示多个词条的以下缺陷：
> 1. 难以恢复页面位置。
> 2. 合并显示时不支持在线词典。
> 3. 不合并显示时加载慢，内存占用高，而且不支持全文翻译。
- 所以新增屏风模式，分散显示多个词条。一次只显示同一词典的内容，通过左右滑动翻页或者跳转来切换。
- 新增进度条，拖动可切换词条。

# v5.7.4
- 增强：优化双击放大页面的功能，支持全局设置、可以拖拽放大。
- 新功能：新增悬浮小按钮（浏览选项），点击查询复制或者拖拽过来的文本。主程序激活时，选择文本后即可直接使用，无需复制（未来或可拓展至其他程序，需第三方支持）。
- 新增“文本工具”按钮：选择文本后可在页面右下方显示一工具按钮。功能与文本菜单项中的“工具”一致，不过弹出更快。（起因是鸿蒙os自带的“翻译”菜单项把“工具”挤走了…）（“多页面设置”、“点译设置”）
- 调整：参考Opera浏览器，重新设计了滑动翻页的处理方式。

# v5.7.3
- 新功能：搜索工具栏添加繁简转换、繁简选字。繁简通搜等以后。
- 新功能：长按底栏词典上下切换按钮，可进入速览模式。
- 增强：定制底栏的对话框，点击按钮图标后即可执行相应操作，无需重新修改。小功能还会有设置按钮(以后做)。
- 翻阅模式、点译模式开启多线程搜索。
- 新功能：主界面和翻阅模式的搜索框，可点开新界面，支持一键复制粘贴、三列搜索词记录等。
- 新功能：启动可恢复最近的搜索词。（设置）
- 新功能：历史记录显示调用者APP的图标。

历史记录数据库新增三个整数字段：
- src : 用于记录搜索来自哪个界面，用于从总的历史记录中筛选出搜索词记录。
- grp : 记录分组id，待用。
- ivk : 记录第三方调用者id，用于追踪APP包名、显示图标。因需要特殊权限，默认关闭（历史记录设置）。

# v5.7.2
- 增强：分组选择器与联合搜索的跳转列表支持单、双列显示。
- 增强：可用弹窗打开target='_blank'链接，这个制作词典时有用。
- 增强：由于安卓碎片化严重，点译不再自绘高亮框，而是保留系统的文本选区。


# v5.7.1
- 调整：调整文本提示横幅动画为在底部弹出，避免遮挡列表。
- 增强：点击列表时会自动记录搜索词，同时在历史记录中区分标识出浏览历史与搜索历史。
- 新功能：新增搜索框的工具面板，可显示最近的搜索词。
- 新功能：新增搜索工具栏。（右上角菜单）
- 增强：词典选择器，优化外观，可以**固定**在词条列表左侧，可调整大小。
- 增强：词典选择器设置了自动搜索后，影响工具底栏的上下切换按钮，可跳过无匹配的词典。
- 修复浮动搜索颜色异常、双指滑动工具栏导致崩溃的BUG
- 新功能：集成谷歌翻译与彩云小译，可全文翻译词典内容，后者还能同时阅读原文与译文。感谢他们吧！有能力可以支持下，或者研究研究如何支持离线翻译…

# v5.7
- 调大工具顶栏的按钮大小与间距。
- 再次调整联合搜索的排序规则，近似结果排在最前。
- 优化局域网页版的外观，比如单个词典的标题栏颜色、背景色设置会反映在其中。

## 基于局域网页版的同一套代码，新增“合并的多页面视图”模式，并使点译支持联合搜索：
- 联合搜索新增“合并的多页面模式”，可用一个网页控件显示全部结果，而不是一个词典对应一个网页控件，理论上更省资源。
- 默认开启了延迟加载（加载压力分散到一段时间中）与懒加载技术（超出屏幕一定范围后暂停加载，滚动时继续），理论上更流畅。
- 由于浏览器组件的安全限制，此模式不能完整显示在线词典，在线词典.web需提供一种简单页面的合成法。但可跳转翻阅模式。
- 支持两种“专注模式”，第一种：点击词条标题后自动折叠其他词条释义。第二种：点击词条标题后限制其他词条释义的页面高度。默认关闭。（多页面设置、长按圆形上下切换按钮）
- 点译支持联合搜索、去掉了原来的大头针连续点译按钮。

- 新增在线彩云小译
- 谷歌翻译、WantWords都支持显示简版页面，用于镶嵌在局域网页版中。WantWords的简版页面只显示释义。
- 附电脑chrome浏览器一键切换谷歌翻译的使用技巧，可用来配合局域网页版，方便对照阅读纯英文词条：https://juejin.cn/post/7059193379900358692/
- 可收藏局域网址到电脑浏览器的收藏夹中，只要手机数据不丢失、内网址不变，就是有效的。
- 支持全文翻译。


- 加载同目录的资源文件添加了诸多限制，默认只在父级目录与词典名称相近、且资源包中查不到时才去访问文件系统。（兼容性选项）

- 局域网服务可保活，包括普通保活（通知栏横幅）与激进保活（持续播放音频），用于对抗手机的普通模式与省电模式，使其在熄屏后仍可提供网页服务，但不一定有效。（兼容性选项、服务器设置）
- 通知栏横幅还可用于点击查询剪贴板内容。

- 新增在线维基词典，可直连，原理和电脑修改hosts差不多，但不能用来访问维基百科等。安卓4.4/若失效，可在词典设置中启用镜像站点。

- 分段加载历史记录和收藏列表。

其他：未修复群友发现的爆内存BUG，但是添加了调试信息，再次发生应可捕捉到是哪一本词典触发了问题。
新版本持续完善中，很多功能没有做完、按钮不能点击。滑动翻页因为需要优化而暂时关闭。页内搜索挂掉了。历史记录与收藏夹的搜索功能也需要重新设计。
正在移除数据库v1的功能。
由于极不稳定，此版本可直降旧版，可覆盖安装。 旧代码太多，进展缓慢，耐心等待。
篇幅过长，其他的特点以后的版本说。


# v5.6.1
- 外置css支持中文名称
- 修复局域网服务器失效

# v5.6
- 修复一二BUG
- 修复暗色模式变白、恢复外挂css
- 开始支持 .files.zip 资源文件

# v5.5
- 新增设置备份与恢复功能。
- 《WantWords 反向词典》配合点译更融洽，兼容安卓4.4。
- 修复图片打不开的BUG。
- 优化翻页预览。

# v5.4
- 新增[在线词典《WantWords 反向词典》](https://wantwords.net)，用描述语查询近义词
- 新增黑暗模式切换动画
- 可以在“关于”对话框中查看更新日志
- 《谷歌翻译》可以使用点译和页内搜索，修复输入框不能编辑的问题

- 暂时取消持久化保存列表位置
- 修复设置不了的BUG
- 修复浮动搜索的BUG
- 修复内置词典的名称显示错误的问题
- 在主界面打开宫格菜单时，显示词典管理按钮，管理词典更方便。

# v5.3
- 调整联合搜索的排序规则，近似结果排在最前。
- 修复无法打开“仅展开第一项”，升级为“仅展开前N项”。
- 记忆设置界面的列表位置。
- 多维分享可记忆上次打开的工具，再次进入后直接跳转。
- 修复多维分享查不到的BUG。
- 修复使用旧版数据库导致崩溃的BUG。


# v5.2
- 修复联合搜索漏掉结果的BUG，感谢沃土的发现。
- 修复左侧抽屉中[最近书签]的显示。
- 为旧设备适配谷歌搜索的[单词释义]功能。
不再提示升级数据库，升级按钮移至[兼容性选项]。


# v5.1.2
- 修复复用缓存引发的乱码BUG


# v5.1
开始支持 dsl.dz 词典格式：
- 首次打开dsl文件需要建立索引，如果文件较小（2MB左右）会自动创建，否则需根据相关指引手动创建，目的是为了不卡住界面，因为10万词条、10MB压缩词典的索引可能需要5~10秒才能创建完毕。执行联合或全文搜索等异步任务时也会自动创建。
索引存储于APP的临时目录*.idx，格式是扩展过的mdx，创建时，排序规则忽略大小写与变音符号。
- 与mdx一样支持全文和词条搜索
- 兼容以空格缩进的词条格式
- 自动切换至新打开的词典




# v5.0.2 
修复以下问题：
- 在词典设置中启用“联合搜索”->“自动折叠”后，点击标题栏却无法再展开
- 无法立即打开新建的分组
- 无法加载内置的《词源在线》

功能调整：
- 打开新的词典后，直接保存到当前的分组中，无需再去提交。



# v5.0.1 
- 修复在主界面切换收藏夹失效
- 修复在网页版联合查询失效
- 修复空指针错误
- 修复翻阅模式（无法在历史记录中打开非当前分组的词典、菜单点不开的问题）
- 可在空白处点击以关闭词典设置对话框。


# v5.0  
新特性：  
  
- 升级至数据库v2，支持更多的记录功能。下一大版本将完全移除数据库v1。升级后，将为每一词典按其文件名分配唯一ID，暂不支持修改文件名了。   
- 正式支持在线词典，内置谷歌翻译、词源在线等，可在词典管理界面中添加。  
- 测试DSL词典。      
- 带来更详细的词典设置界面，可点击内容页面、标题栏上，词典的封面图标进入，持续完善中。  
- 更容易从左侧抽屉进入设置界面。各处放置了一些金色的帮助按钮，点击后显示一小段wiki说明。  

- 修复字体放大、分享目标里的BUG。  